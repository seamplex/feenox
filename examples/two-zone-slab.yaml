---
category: neutron_diffusion
intro: |
 # Illustration of the XS dilution & smearing effect

 > The best way to solve a problem is to avoid it in the first place.
 >
 > Richard M. Stallman

 Let us consider a two-zone slab reactor:

  a. Zone\ $A$ has\ $k_\infty < 1$ and extends from $x=0$ to $x=a$.
  b. Zone\ $B$ has\ $k_\infty > 1$ and extends from $x=a$ to $x=b$.

  * The slab is solved with a one-group diffusion approach.
  * Both zones have uniform macroscopic cross sections.
  * Flux\ $\phi$ is equal to zero at both at $x=0$ and at $x=b$.

 Under these conditions, the overall analytical effective multiplication factor is $k_\text{eff}$ such that

 $$
  \sqrt{D_A\cdot\left(\Sigma_{aA}- \frac{\nu\Sigma_{fA}}{k_\text{eff}}\right)} \cdot
   \tan\left[\sqrt{\frac{1}{D_B} \cdot\left( \frac{\nu\Sigma_{fB}}{k_\text{eff}}-\Sigma_{aB} \right) }\cdot (a-b) \right]
 $$
 $$
  = \sqrt{D_B\cdot\left(\frac{\nu\Sigma_{fB}}{k_\text{eff}}-\Sigma_{aB}\right)} \cdot
   \tanh\left[\sqrt{\frac{1}{D_A} \cdot\left( \Sigma_{aA}-\frac{\nu\Sigma_{fA}}{k_\text{eff}} \right)} \cdot b\right]
 $$

 We can then compare the numerical $k_\text{eff}$ computed using...

  i. a non-uniform grid with $n+1$ nodes such that there is a node exactly at the interface $x=a$.
  ii. an uniform grid (mimicking a neutronic code that cannot handle case i.) with $n$ uniformly-spaced elements. The element that contains point $x=b$ is assigned to a pseudo material $AB$ that linearly interpolates the macroscopic cross sections according to where in the element the point $x=b$ lies. That is to say, if the element width is 10 and $a=52$ then this $AB$ material will be 20% of material\ $A$ and 80% of material\ $B$.


 > The objective of this example is to show that
 > case\ i. will monotonically converge to the analytical multiplication factor as $n \rightarrow \infty$ while
 > case\ ii. will show a XS dilution and smearing effect.
 > FeenoX of course can solve both cases, but there are many other neutronic tools out there that can handle only structured grids.

 ```{.bash include="two-zone-slab.sh"}
 ```
terminal: |
  $ ./two-zone-slab.sh 10
  [...]
  $ ./two-zone-slab.sh 20
  [...]
  $ pyxplot two-zone-slab.ppl
  $
figures: |
  ![$k_\text{eff}$ vs. $a$](two-zone-slab-keff.svg){width=100%}
  
  ![Error vs. $a$](two-zone-slab-error.svg){width=100%}
 
  > To illustrate the point of this example, think about the following 2D case:
  >
  > ![](2d-slanted.png){width=50%}\ 
  >
  >  1. How would you solve something like this with a neutronic tool that only allowed structured grids?
  >  2. Even if the two control rods were not slanted, as long as they were not inserted up to the same height there would be XS dilution & semaring when using a structured grid (even if the tool allows non-uniform cells in each direction).
  >  3. Consider RMS’s quotation above: the best way to solve a problem (i.e. XS dilution) is to avoid it in the first place (i.e. to use a tool able to handle unstructured grids).
...
