---
category: mechanical
intro: |
  # NAFEMS GNL5 “Large-deformation beam”
 
  > Large-strain problems in FeenoX are **WORK IN PROGRESS**.
  > Evaluation of stresses, performance, parallelization, etc. will improve.
  > Take this example with a grain of salt.
  
  ![The NAFEMS Geometric-non-linear cantilever beam  benchmark problem.](nafems-gnl-cantilever-problem.svg){width=100%}
  
  Consider a cantilevered beam with a square $0.1~\text{m} \times 0.1~\text{m}$ cross section and axial length $3.2~\text{m}$ along the $x$ axis. The material es linear elastic with $E=2.1 \times 10^{11} \text{Pa}$ and $\nu=0$. The left end at plane $y$-$z$ is fixed. The right end is subject to a total load of $F_x = -3.844 \times 10^6~\text{N}$ (compressive) and $F_y = -3.844 \times 10^3~\text{N}$ (downward).
  
  A large-deformation buckling effect is expected due to the massive compression of a slender structural geometry and the slight $0.1\%$ loading imperfection in the $y$ direction. The reference results are
  
  | Scalar quantity                                  | Reference result               |
  |:-------------------------------------------------|:------------------------------:|
  | Maximum vertical displacement at the tip         | $(-2.58 \pm 0.02)~\text{m}$    |
  | Final vertical displacement at the tip           | $(-1.36 \pm 0.02)~\text{m}$    |
  | Final vertical displacement at the tip           | $(-5.04 \pm 0.04)~\text{m}$    |
   
  ---
  
  To solve the problem, let's start with a Gmsh input file to create a nice structured hex20 mesh:
 
  ```{.c include="nafems-gnl-cantilever.geo"}
  ```
  
  ![Structured $2 \times 2% hex20 grid.](nafems-gnl-cantilever-mesh.png)
  
  This problem is non-linear and path dependent so we have to make sure FeenoX can detect the critical buckling load, otherwise it might converge to other possible solutions.
  
  For that end, we run a quasi-static problem with a non-dimensional time $t$ from $t=0$ up to $t=1$ (i.e. `end_time = 1`) and scale the loads with the factor $t$. We start with $\Delta t_0 = 0.01$ (i.e. `dt_0 = 1e-2` meaning $1\%$ of the load) and then allow FeenoX to choose the time (load) step.
  
  In FeenoX, to use a linear-elastic isotropic material model in the large-deformation (a.k.a. [Saint Venant-Kirchoff model](https://en.wikipedia.org/wiki/Hyperelastic_material#Saint_Venant%E2%80%93Kirchhoff_model)) one can either
  
   a. keep $E$ and $\nu$ as global variables `E` and `nu` respectively as in the [linear case](http://localhost/milhouse/feenox/examples/mechanical.html#nafems-le10-thick-plate-pressure-benchmark) above and then
   
      i. set the special variable `ldef` to non-zero, or
      ii. write the  `NONLINEAR` keyword in the `PROBLEM` line, or
      iii. pass `--non-linear` option in the command line, or
   
   b. write a special `MATERIAL` with `MODEL svk` like
  
      ```fee
      MATERIAL E=2.1e11 nu=0 MODEL svk
      ```
      
  In the actual input file we use a-i:
 
terminal: |
  $ gmsh -3 nafems-gnl-cantilever.geo
  [...]
  $ feenox nafems-gnl-cantilever.fee | tee nafems-gnl-cantilever.dat
  [...]
  $ awk '{print $5}' nafems-gnl-cantilever.dat | sort -rg | tail -n1
  -2.58023
  $ awk '{print $5}' nafems-gnl-cantilever.dat | tail -n1
  -1.33159
  $ awk '{print $4}' nafems-gnl-cantilever.dat | tail -n1
  -5.08797
  $ ./quasistatic-video.py nafems-gnl-cantilever.pvd
  [...]
  Saved animation to nafems-gnl-cantilever.pvd.mp4
  $ pyxplot nafems-gnl-cantilever.ppl 
  $ 
figures: |
  ![](https://www.seamplex.com/feenox/examples/nafems-gnl-cantilever.pvd.mp4){width=100%}

  ![Displacements vs. non-dimensional time (load factor)](nafems-gnl-cantilever.svg){width=100%}
  
  > Take some time to compare FeenoX's approach, namely
  >
  >  * one text file for the geometry
  >  * one text file for the problem,
  >  * a solver [designed to follow the Unix philosophy](https://www.seamplex.com/feenox/doc/sds.html)
  >  * standard Unix tools to get results 
  >
  > against [the proposed way to solve this very same problem with a point-and-click tool](https://cds.comsol.com/model/download/837521/models.sme.large_deformation_beam.pdf?__gda__=1755866244_4e06a2471efdf19e9a27923cfc27bdc9&fileExt=.pdf).
  > Spoiler: it needs 15 pages of instructions about where to click to solve the problem.
...
